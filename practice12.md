# 実践12. 弱点克服！MDwikiをGoogle検索の対象にする

## MDwikiで作ったサイトを検索で見つけられない理由

MDwikiで作ったサイトは基本的には検索で見つけることができません。これにはいくつかの理由があります。

### 理由1：ウェブサイト運営者がGoogleにウェブサイトを登録していない

Googleやbingなどの検索サービスは、クローラーと呼ばれる自動プログラムによって常にインターネット上に新しいウェブサイトが開設されていないか探しています。しかしウェブサイト数の爆発的に増えた現代において、偶然クローラーに発見してもらえることを期待することは宝くじの1等当選を期待するようなものです。ウェブサイト運営者が自発的にGoogleやbingにウェブサイトのURLを登録する必要があります。

### 理由2：sitemap.xmlがない

ウェブサイト運営者がGoogleにウェブサイトを登録する際、sitemap.xmlというファイル名の、サイト内ページURL一覧表が必要です。しかしながら、MDwikiはsitemap.xmlを自動生成しないため、ウェブサイトのURLだけしか(ページとしてはindex.htmlだけしか)登録できません。

### 理由3：Googleサーチコンソールにおける「#!」を含むURLの扱い

さて、GoogleにウェブサイトURLとsitemap.xmlの両方を登録したとしましょう。ウェブページのURLが文字列`#!`を含む場合、GoogleはURLの当該箇所を`?_escaped_fragment_=`に置き換えてからそのウェブページが実在するかどうかを確認しに行きます。MDwiki側ではそのようなURLを求められた場合、`?_escaped_fragment_=`以降の文字列はなかったものとしてページを表示します。よって、たとえsitemap.xmlがあったとしても、MDwikiで構築されたウェブサイトでGoogle検索の対象となるのはやはりウェブサイトのURLだけ(ページとしてはindex.htmlだけ)になります。

## 対策

いまのところ対策としてできるのは３つです。

1. Googleサーチコンソールで手作業でサイトURLを登録する
1. 表紙(index.md)に各ページの概要に相当する文書を書く
1. 表紙以外のページについては偶然Googleクローラーに発見されるのを待つ

### GoogleサーチコンソールでURLを登録する

** 手順 **

1. Googleサーチコンソールを開く <https://search.google.com/search-console/about?hl=ja>
1. (初回利用時であればここでURL入力欄が開く)
1. サイトのURLを入力
1. [プロパティを追加]ボタンクリック
1. 所有権の確認画面よりファイル名が長い乱数になっているHTMLファイルをダウンロードする
1. ダウンロードしたHTMLファイルをウェブサーバー上のindex.html(mdwiki.htmlをリネームしたもの)と同じ階層に配置する

### 表紙(index.md)に各ページの概要に相当する文書を書く

非常にローテクな手段ですが、index.mdに各ページの概要(description)に相当する文書を書くことで、サイト全体の概要をGoogleに伝えることができます。最低でも全ページのタイトルを書きましょう。

### 表紙以外のページについては偶然Googleクローラーに発見されるのを待つ

実はGoogleはURLに文字列`#!`を含むウェブページをちゃんと検索対象にしています。試しに`"07. 真にミニマルなマークダウンエディタ・Typora"`というキーワードでgoogle検索してみてください。当該ページが検索結果第１位に表示されるはずです（2019.5月現在）。ようするに、URLに文字列`#!`を含むウェブページを正しく処理できないのはGoogleサーチコンソールであってGoogleクローラーは正しく処理できる、ということです。気長に待ちましょう。

## 関連ページ

###### 関連ページ

* [01. なにが違うの？GitとGitHub](practice01.md)
* [02. コマンドラインはもう不要・GitHub Desktop](practice02.md)
* [03. 完全無料のウェブサーバー・GitHub Pages](practice03.md)
* [04. これだけ知ればGitHub Pageを使える！Git用語](practice04.md)
* [05. たった2つのファイルでサイト構築・MDwiki](practice05.md)
* [06. 圧倒的な作業の効率化！マークダウン記法](practice06.md)
* [07. 真にミニマルなマークダウンエディタ・Typora](practice07.md)
* [08. Git対応高機能テキストエディタ・ATOM](practice08.md)
* [09. MDwikiをカスタマイズする・基本編](practice09.md)
* [10. MDwikiをカスタマイズする・HTML編](practice10.md)
* [11. MDwikiをカスタマイズする・CSS編](practice11.md)
* <i class="far fa-hand-point-right fa-fw"></i>12. 弱点克服！MDwikiをGoogle検索の対象にする